<div id="<%= dom_id track %>" class="flex justify-between items-stretch w-full sm:w-auto rounded p-2 hover:bg-hover cursor-pointer">
  <div class="flex justify-start itmes-center gap-4 truncate min-w-30">
    <div class="flex justify-center items-center text-xs text-secondary-txt"><%= index %></div>
    <div class="flex justify-center items-center rounded w-8 h-8 min-w-8 min-h-8 bg-secondary-bg">
      <% if track.cover_photo.attached? %>
        <img src="<%= url_for(track.cover_photo) %>" class="flex justify-center items-center w-full h-full rounded">
      <% else %>
        <%= icon "photo-scan" %>
      <% end %>
    </div>
    <div class="flex flex-col justify-between items-start">
      <%= link_to "#{track.title}", track_path(track), class: "text-sm cursor-pointer hover:underline" %>
      <div class="flex justify-start items-center gap-1 text-secondary-txt text-[0.6rem]">
        <span><%= "#{track.bpm} BPM" %></span>
        <span>·</span>
        <span><%= track.key %></span>
        <span>·</span>
        <span><%= track.genre %></span>
      </div>
    </div>
  </div>
  <div class="flex justify-end items-center gap-4 shrink-0">
    <div class="flex justify-start items-center gap-1 text-[0.6rem] max-w-60 max-lg:max-w-40 overflow-x-auto hide-scrollbar">
      <% track.get_tags.each do |tag| %>
        <div class="chip text-secondary-txt max-md:hidden"><%= tag %></div>
      <% end %>
    </div>
    <div class="flex justify-center items-center gap-1 chip-accent text-[0.6rem]">
      <%= icon "download", class: "w-3 h-3" %>
      <span class="max-sm:hidden"><%= t("label.free").downcase %></span>
    </div>

    <%# TODO get the lowest price of the track %>
    <button class="button text-xs px-2 py-1.5 flex justify-center items-center gap-1.5">
      <%= icon "shopping-bag", class: "w-4 h-4" %>
      <span class="max-sm:hidden">$19.99</span>
    </button>

    <div>
      <%= icon "dots-vertical", class: "w-4 h-4" %>
    </div>
  </div>
</div>
